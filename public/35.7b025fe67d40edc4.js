"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[35],{35:(j,S,s)=>{s.r(S),s.d(S,{DispositivosPageModule:()=>$});var D=s(6895),P=s(4719),a=s(1558),g=s(2507),h=s(5861),O=s(9337),i=s(6353),f=s(529),Z=s(2531),T=s(2340),b=s(1188);const x=T.N.api;let M=(()=>{class o{constructor(t,d){var p=this;this.http=t,this.storageService=d,this.dispositivos=[],this.dispositivosObtener=(0,h.Z)(function*(){let l=new Z.b;l=yield p.storageService.get("usuario");const v=new f.WM({"Content-Type":"application/json",Authorization:l.token}),e=(new f.LE).set("usuario",l.id);return yield p.http.get(`${x}/api/dispositivo`,{headers:v,params:e}).toPromise().then(r=>(p.dispositivos=r,p.dispositivos)).catch(r=>{throw console.log("error dispositivosObtener",r),new Error(r)})})}}return o.\u0275fac=function(t){return new(t||o)(i.LFG(f.eN),i.LFG(b.V))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=s(8555),F=s(5970),L=s(3646);function A(o,c){if(1&o){const t=i.EpF();i.TgZ(0,"div")(1,"ion-card")(2,"ion-item"),i._UZ(3,"ion-icon",4),i.TgZ(4,"ion-label"),i._uU(5),i.qZA(),i.TgZ(6,"ion-button",5),i.NdJ("click",function(){const l=i.CHM(t).$implicit,v=i.oxw();return i.KtG(v.obtenerOpciones(l))}),i._uU(7,"View"),i.qZA()(),i.TgZ(8,"ion-item")(9,"ion-label"),i._uU(10),i.qZA()()()()}if(2&o){const t=c.$implicit;i.xp6(3),i.Q6J("name",t.icon),i.xp6(2),i.Oqu(t.nombre),i.xp6(5),i.Oqu(t.ubicacion)}}const B=[{path:"",component:(()=>{class o{constructor(t,d,p,l,v){var e=this;this.dispositivosService=t,this.actionSheetController=d,this.router=p,this.loaderService=l,this.alertService=v,this.dispositivos=[],this.listaOpciones=[],this.obtenerDispositivos2=(0,h.Z)(function*(){yield e.loaderService.simpleLoader("cargando");try{e.dispositivos=yield e.dispositivosService.dispositivosObtener(),yield e.loaderService.dismissLoader()}catch(r){yield e.loaderService.dismissLoader(),console.log("obtenerDispositivos2 error",r);const n=new O.b;n.header="dispositivos failed",n.message="el mensaje error",n.buttons=["OK"],yield e.alertService.simpleAlert(n)}}),this.obtenerDispositivos=(0,h.Z)(function*(){yield e.loaderService.simpleLoader("cargando");try{e.dispositivos=yield e.dispositivosService.dispositivosObtener(),e.dispositivos.forEach(m=>{const y={text:m.nombre,icon:m.icon,handler:()=>{console.log(`Dispositivo id ${m.id} clicked`),e.router.navigate(["temperatura/"])}};e.listaOpciones.push(y)}),e.listaOpciones.push({text:"Cancel",role:"cancel",icon:"close"});const n=yield e.actionSheetController.create({header:"Dispositivos",buttons:e.listaOpciones});yield e.loaderService.dismissLoader(),yield n.present()}catch(r){yield e.loaderService.dismissLoader(),console.log("obtenerDispositivos error",r);const n=new O.b;n.header="dispositivos failed",n.message="el mensaje error",n.buttons=["OK"],yield e.alertService.simpleAlert(n)}}),this.loadMore=r=>{console.log("i trigger"),setTimeout(()=>{r.target.complete()},1e3)},this.obtenerOpciones=function(){var r=(0,h.Z)(function*(n){if(e.listaOpciones=[],n.tipo.find(u=>"temperatura"===u)){let u={text:"ver temperatura",icon:"thermometer-outline",handler:()=>{e.router.navigate([`temperatura/${n.id}`])}};e.listaOpciones.push(u),u={text:"ver grafico",icon:"stats-chart-outline",handler:()=>{e.router.navigate([`grafico/${n.id}`])}},e.listaOpciones.push(u)}e.listaOpciones.push({text:"Cancel",role:"cancel",icon:"close-outline"}),yield(yield e.actionSheetController.create({header:"Opciones",buttons:e.listaOpciones})).present()});return function(n){return r.apply(this,arguments)}}()}ngOnInit(){this.obtenerDispositivos2()}}return o.\u0275fac=function(t){return new(t||o)(i.Y36(M),i.Y36(a.BX),i.Y36(g.F0),i.Y36(C.D),i.Y36(F.c))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-dispositivos"]],decls:5,vars:1,consts:[["titulo","dispositivos header"],[4,"ngFor","ngForOf"],["position","bottom","threshold","30%",3,"ionInfinite"],["loadingSpinner","crescent","loadingText","Loading more data..."],["slot","start",3,"name"],["fill","outline","slot","end",3,"click"]],template:function(t,d){1&t&&(i._UZ(0,"app-header",0),i.TgZ(1,"ion-content"),i.YNc(2,A,11,3,"div",1),i.TgZ(3,"ion-infinite-scroll",2),i.NdJ("ionInfinite",function(l){return d.loadMore(l)}),i._UZ(4,"ion-infinite-scroll-content",3),i.qZA()()),2&t&&(i.xp6(2),i.Q6J("ngForOf",d.dispositivos))},dependencies:[D.sg,a.YG,a.PM,a.W2,a.gu,a.ju,a.MB,a.Ie,a.Q$,L.G]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[g.Bz.forChild(B),g.Bz]}),o})();var U=s(5642);let $=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[D.ez,P.u5,a.Pc,Y,U.K]}),o})()}}]);